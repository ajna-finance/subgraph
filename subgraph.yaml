specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: PositionManager
    network: goerli
    source:
      address: "0x31BcbE14Ad30B2f7E1E4A14caB2C16849B73Dac3"
      abi: PositionManager
      startBlock: 8613513
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Approval
        - ApprovalForAll
        - Burn
        - MemorializePosition
        - Mint
        - MoveLiquidity
        - RedeemPosition
        - Transfer
      abis:
        - name: PositionManager
          file: ./abis/PositionManager.json
        - name: ERC721
          file: ./abis/ERC721.json
        - name: PoolInfoUtils
          file: ./abis/PoolInfoUtils.json
      eventHandlers:
        - event: Approval(indexed address,indexed address,indexed uint256)
          handler: handleApproval
        - event: ApprovalForAll(indexed address,indexed address,bool)
          handler: handleApprovalForAll
        - event: Burn(indexed address,indexed uint256)
          handler: handleBurn
        - event: MemorializePosition(indexed address,uint256,uint256[])
          handler: handleMemorializePosition
        - event: Mint(indexed address,indexed address,uint256)
          handler: handleMint
        - event: MoveLiquidity(indexed address,uint256,uint256,uint256)
          handler: handleMoveLiquidity
        - event: RedeemPosition(indexed address,uint256,uint256[])
          handler: handleRedeemPosition
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleTransfer
      file: ./src/position-manager.ts
  - kind: ethereum
    name: ERC20PoolFactory
    network: goerli
    source:
      address: "0x9684b8eC942985b23d343cB82D2F30EdA8fD7179"
      abi: ERC20PoolFactory
      startBlock: 8613513
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PoolCreated
      abis:
        - name: ERC20PoolFactory
          file: ./abis/ERC20PoolFactory.json
        - name: ERC20Pool
          file: ./abis/ERC20Pool.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: PoolCreated(address)
          handler: handlePoolCreated
      file: ./src/erc-20-pool-factory.ts
  - kind: ethereum
    name: RewardsManager
    network: goerli
    source:
      address: "0xEd6890d748e62ddbb3f80e7256Deeb2fBb853476"
      abi: RewardsManager
      startBlock: 8613513
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - ClaimRewards
        - MoveStakedLiquidity
        - Stake
        - Unstake
        - UpdateExchangeRates
      abis:
        - name: RewardsManager
          file: ./abis/RewardsManager.json
        - name: PositionManager
          file: ./abis/PositionManager.json
      eventHandlers:
        - event: ClaimRewards(indexed address,indexed address,indexed uint256,uint256[],uint256)
          handler: handleClaimRewards
        - event: MoveStakedLiquidity(uint256,uint256[],uint256[])
          handler: handleMoveStakedLiquidity
        - event: Stake(indexed address,indexed address,indexed uint256)
          handler: handleStake
        - event: Unstake(indexed address,indexed address,indexed uint256)
          handler: handleUnstake
        - event: UpdateExchangeRates(indexed address,indexed address,uint256[],uint256)
          handler: handleUpdateExchangeRates
      file: ./src/rewards-manager.ts
  - kind: ethereum
    name: ERC721PoolFactory
    network: goerli
    source:
      address: "0x7DB5ba7cB6dAD74b45AAB027A7E7388eF18656DF"
      abi: ERC721PoolFactory
      startBlock: 8613513
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - PoolCreated
      abis:
        - name: ERC721PoolFactory
          file: ./abis/ERC721PoolFactory.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: ERC721
          file: ./abis/ERC721.json
      eventHandlers:
        - event: PoolCreated(address)
          handler: handlePoolCreated
      file: ./src/erc-721-pool-factory.ts
  - kind: ethereum
    name: GrantFund
    network: goerli
    source:
      address: "0xaeB91e664A49829FaBf06BE35d4447938d83A271"
      abi: GrantFund
      startBlock: 8613513
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - DelegateRewardClaimed
        - FundTreasury
        - FundedSlateUpdated
        - ProposalCreated
        - ProposalExecuted
        - QuarterlyDistributionStarted
        - VoteCast
      abis:
        - name: GrantFund
          file: ./abis/GrantFund.json
      eventHandlers:
        - event: DelegateRewardClaimed(indexed address,indexed uint256,uint256)
          handler: handleDelegateRewardClaimed
        - event: FundTreasury(uint256,uint256)
          handler: handleFundTreasury
        - event: FundedSlateUpdated(indexed uint256,indexed bytes32)
          handler: handleFundedSlateUpdated
        - event: ProposalCreated(uint256,address,address[],uint256[],string[],bytes[],uint256,uint256,string)
          handler: handleProposalCreated
        - event: ProposalExecuted(uint256)
          handler: handleProposalExecuted
        - event: QuarterlyDistributionStarted(indexed uint256,uint256,uint256)
          handler: handleQuarterlyDistributionStarted
        - event: VoteCast(indexed address,uint256,uint8,uint256,string)
          handler: handleVoteCast
      file: ./src/grant-fund.ts
templates:
  - kind: ethereum
    name: ERC20Pool
    network: goerli
    source:
      abi: ERC20Pool
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - AddCollateral
        - AddQuoteToken
        - ApproveLpTransferors
        - AuctionNFTSettle
        - AuctionSettle
        - BondWithdrawn
        - BucketBankruptcy
        - BucketTake
        - BucketTakeLPAwarded
        - DrawDebt
        - Kick
        - LoanStamped
        - MoveQuoteToken
        - RemoveCollateral
        - RemoveQuoteToken
        - RepayDebt
        - ReserveAuctionKickOrTake
        - RevokeLpAllowance
        - RevokeLpTransferors
        - SetLpAllowance
        - Settle
        - Take
        - TransferLPs
        - UpdateInterestRate
      abis:
        - name: ERC20Pool
          file: ./abis/ERC20Pool.json
        - name: PoolInfoUtils
          file: ./abis/PoolInfoUtils.json
      blockHandlers:
        - handler: handleBlock
      eventHandlers:
        - event: AddCollateral(indexed address,indexed uint256,uint256,uint256)
          handler: handleAddCollateral
        - event: AddQuoteToken(indexed address,indexed uint256,uint256,uint256,uint256)
          handler: handleAddQuoteToken
        - event: ApproveLpTransferors(indexed address,address[])
          handler: handleApproveLpTransferors
        - event: AuctionNFTSettle(indexed address,uint256,uint256,uint256)
          handler: handleAuctionNFTSettle
        - event: AuctionSettle(indexed address,uint256)
          handler: handleAuctionSettle
        - event: BondWithdrawn(indexed address,indexed address,uint256)
          handler: handleBondWithdrawn
        - event: BucketBankruptcy(indexed uint256,uint256)
          handler: handleBucketBankruptcy
        - event: BucketTake(indexed address,uint256,uint256,uint256,uint256,bool)
          handler: handleBucketTake
        - event: BucketTakeLPAwarded(indexed address,indexed address,uint256,uint256)
          handler: handleBucketTakeLPAwarded
        - event: DrawDebt(indexed address,uint256,uint256,uint256)
          handler: handleDrawDebt
        - event: Kick(indexed address,uint256,uint256,uint256)
          handler: handleKick
        - event: LoanStamped(indexed address)
          handler: handleLoanStamped
        - event: MoveQuoteToken(indexed address,indexed uint256,indexed
            uint256,uint256,uint256,uint256,uint256)
          handler: handleMoveQuoteToken
        - event: RemoveCollateral(indexed address,indexed uint256,uint256,uint256)
          handler: handleRemoveCollateral
        - event: RemoveQuoteToken(indexed address,indexed uint256,uint256,uint256,uint256)
          handler: handleRemoveQuoteToken
        - event: RepayDebt(indexed address,uint256,uint256,uint256)
          handler: handleRepayDebt
        - event: ReserveAuction(uint256,uint256,uint256)
          handler: handleReserveAuction
        - event: RevokeLpAllowance(indexed address,uint256[])
          handler: handleRevokeLpAllowance
        - event: RevokeLpTransferors(indexed address,address[])
          handler: handleRevokeLpTransferors
        - event: SetLpAllowance(indexed address,uint256[],uint256[])
          handler: handleSetLpAllowance
        - event: Settle(indexed address,uint256)
          handler: handleSettle
        - event: Take(indexed address,uint256,uint256,uint256,bool)
          handler: handleTake
        - event: TransferLPs(address,address,uint256[],uint256)
          handler: handleTransferLPs
        - event: UpdateInterestRate(uint256,uint256)
          handler: handleUpdateInterestRate
      file: ./src/erc-20-pool.ts
